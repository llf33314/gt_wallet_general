webpackJsonp([4],{"+clr":function(e,t){},fvck:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("D/u7"),l=r.n(a),i=r("i/rw"),s=r.n(i),n={data:function(){var e=this;return{ruleForm1:{companyName:"",businessLicense:"",companyAddress:"",area:"",province:"",addressNull:""},rules1:{area:[{required:!0,message:"请选择市县区",trigger:"change"}],addressNull:[{required:!0,message:" ",trigger:"blur"}],province:[{required:!0,message:"请选择省份",trigger:"change"}],companyName:[{required:!0,message:"请输入企业名称",trigger:"blur"},{min:3,max:30,message:"长度在 3 到 30 个字符",trigger:"blur"}],companyAddress:[{required:!0,message:"请输入企业地址",trigger:"blur"},{min:3,max:30,message:"长度在 3 到 30 个字符",trigger:"blur"}],businessLicense:[{required:!0,message:"请输入营业执照号",trigger:"blur"}]},provinceOptins:[],areaOptins:[],ruleForm2:{legalName:"",legalIds:"",legalPhone:""},rules2:{legalName:[{required:!0,message:"请输入法定代表人姓名",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],legalIds:[{required:!0,message:"请输入法人证件号码",trigger:"blur"},{min:18,max:18,message:"请输入正确法人证件号码",trigger:"blur"}],legalPhone:[{required:!0,validator:function(t,r,a){""==r?a(new Error("请输入法人手机号码")):e.isPhone(r)?a():a(new Error("请输入正确法人手机号码"))},trigger:"blur"}]},ruleForm3:{accountNo:"",unionBank:"",parentBankName:"",bankCityNo:"",backName:""},rules3:{accountNo:[{required:!0,validator:function(t,r,a){""==r?a(new Error("请输入对公帐号")):e.CheckBankNo(r)?a():a(new Error("请输入对公帐号"))},trigger:"blur"}],unionBank:[{required:!0,message:"请输入支付行号",trigger:"blur"}],bankCityNo:[{required:!0,message:"请输入开户行地区代码",trigger:"blur"}],backName:[{required:!0,message:"请输入开户行支行名称",trigger:"blur"}]},activeFlag:{},isUnionBankFlag:!1,failReason:"13131"}},watch:{"ruleForm1.companyAddress":function(){this.ruleForm1.addressNull=this.ruleForm1.companyAddress}},mounted:function(){var e=this;this.getProvince(),$.ajax({url:this.DFPAYDOMAIN+"/walletMember/findMember",type:"GET",dataType:"json",success:function(t){0===t.code&&t.data.failReason&&e.$message({showClose:!0,message:t.data.failReason,type:"error",duration:0})}})},methods:{linkBlank:function(){window.open("http://www.lianhanghao.com/index.php/Index/index/bank/4/province/19/city/243/p/5.html")},CheckBankNo:function(e){if(""==(e=e.replace(/\s/g,"")))return!1;if(e.length<16||e.length>20)return!1;if(!/^\d*$/.exec(e))return!1;return-1!="10,18,30,35,37,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,58,60,62,65,68,69,84,87,88,94,95,98,99".indexOf(e.substring(0,2))},isPhone:function(e){var t=!0;return/^((\+?86)|(\(\+86\)))?(13[0123456789][0-9]{8}|15[0123456789][0-9]{8}|17[0123456789][0-9]{8}|18[0123456789][0-9]{8}|147[0-9]{8}|1349[0-9]{7})$/.test(e)||(t=!1),t},isChina:function(e){return!!/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]/gi.exec(e)},isUnionBank:function(e){this.isUnionBankFlag=!1;var t=["中国工商银行","中国农业银行","中国建设银行","中信银行","平安银行","招商银行","兴业银行","南京银行","农信银行"].join("").indexOf(e);this.isUnionBankFlag=!(t>0)},getProvince:function(){var e=this;$.ajax({url:this.DFPAYDOMAIN+"/wcommon/getProvince",type:"GET",dataType:"json",success:function(t){0==t.code?e.provinceOptins=t.data:e.$message.error(t.msg)}})},getareas:function(e){var t=this;$.ajax({url:this.DFPAYDOMAIN+"/wcommon/queryCityByParentId",type:"POST",dataType:"json",data:{parentId:e},success:function(e){0==e.code?(t.ruleForm1.area="",t.areaOptins=e.data):t.$message.error(e.msg)}})},submitForm:function(e,t){var r=this;this.$refs[e].validate(function(e){r.activeFlag[t]=!!e})},avtive1:function(){var e=this;if(this.submitForm("ruleForm1","type1"),this.submitForm("ruleForm2","type2"),this.submitForm("ruleForm3","type3"),this.activeFlag.type1&&this.activeFlag.type2&&this.activeFlag.type3){var t=JSON.parse(s()(this.ruleForm1));this.provinceOptins.forEach(function(r){e.ruleForm1.province==r.id&&(t.province=r.city_code)}),this.areaOptins.forEach(function(r){e.ruleForm1.area==r.id&&(t.area=r.city_code)});var r=l()(t,this.ruleForm2,this.ruleForm3);r.memberId=this.$route.params.memberId,this.submit(r)}},submit:function(e){var t=this;this.$confirm("提交后不可更改信息，确认提交么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){$.ajax({url:t.DFPAYDOMAIN+"/walletCompany/save",type:"POST",dataType:"json",data:e,success:function(e){0==e.code?t.$router.push({path:"/wallet/company/open/uploadFile/"+t.$route.params.memberId}):t.$message.error(e.msg)}})}).catch(function(){t.$message({type:"info",message:"已取消"})})}}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("section",{staticClass:"wallet-company-open"},[r("el-breadcrumb",{staticClass:"public-crumbs",attrs:{separator:"/"}},[r("el-breadcrumb-item",[e._v("多粉钱包")]),e._v(" "),r("el-breadcrumb-item",[e._v("企业开通")])],1),e._v(" "),r("div",{staticClass:"public-content",staticStyle:{"margin-bottom":"0","padding-bottom":"0"}},[r("el-steps",{staticStyle:{"border-bottom":"1px solid #ddd",padding:"20px 0"},attrs:{active:1,center:"true"}},[r("el-step",{attrs:{title:"填写基本信息"}}),e._v(" "),r("el-step",{attrs:{title:"上传证件照片"}}),e._v(" "),r("el-step",{attrs:{title:"提交成功"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"public-content",staticStyle:{"margin-top":"40px"}},[e._m(0),e._v(" "),r("el-form",{ref:"ruleForm1",staticStyle:{width:"600px"},attrs:{model:e.ruleForm1,rules:e.rules1,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"企业名称：",prop:"companyName"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入企业名称"},model:{value:e.ruleForm1.companyName,callback:function(t){e.$set(e.ruleForm1,"companyName",t)},expression:"ruleForm1.companyName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"营业执照号：",prop:"businessLicense"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入营业执照号"},model:{value:e.ruleForm1.businessLicense,callback:function(t){e.$set(e.ruleForm1,"businessLicense",t)},expression:"ruleForm1.businessLicense"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"企业地址：",prop:"addressNull"}},[r("el-form-item",{staticStyle:{display:"inline-block",width:"218px"},attrs:{prop:"province"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getareas},model:{value:e.ruleForm1.province,callback:function(t){e.$set(e.ruleForm1,"province",t)},expression:"ruleForm1.province"}},e._l(e.provinceOptins,function(e){return r("el-option",{key:e.id,attrs:{label:e.city_name,value:e.id+""}})}))],1),e._v(" "),r("el-form-item",{staticStyle:{display:"inline-block",width:"218px"},attrs:{prop:"area"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm1.area,callback:function(t){e.$set(e.ruleForm1,"area",t)},expression:"ruleForm1.area"}},e._l(e.areaOptins,function(e){return r("el-option",{key:e.id,attrs:{label:e.city_name,value:e.id+""}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{prop:"companyAddress"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入详细地址"},model:{value:e.ruleForm1.companyAddress,callback:function(t){e.$set(e.ruleForm1,"companyAddress",t)},expression:"ruleForm1.companyAddress"}})],1)],1),e._v(" "),r("div",{staticClass:"public-table-title"},[e._v("\n      法定代表人信息\n    ")]),e._v(" "),r("el-form",{ref:"ruleForm2",staticStyle:{width:"600px"},attrs:{model:e.ruleForm2,rules:e.rules2,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"法定代表人姓名：",prop:"legalName"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入法定代表人姓名"},model:{value:e.ruleForm2.legalName,callback:function(t){e.$set(e.ruleForm2,"legalName",t)},expression:"ruleForm2.legalName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"法人证件号码：",prop:"legalIds"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入法人证件号码"},model:{value:e.ruleForm2.legalIds,callback:function(t){e.$set(e.ruleForm2,"legalIds",t)},expression:"ruleForm2.legalIds"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"法人手机号码：",prop:"legalPhone"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入法人手机号码",type:"number"},model:{value:e.ruleForm2.legalPhone,callback:function(t){e.$set(e.ruleForm2,"legalPhone",t)},expression:"ruleForm2.legalPhone"}})],1)],1),e._v(" "),r("div",{staticClass:"public-table-title"},[e._v("\n      银行卡信息\n    ")]),e._v(" "),r("el-form",{ref:"ruleForm3",staticStyle:{width:"600px"},attrs:{model:e.ruleForm3,rules:e.rules3,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"开户银行名称：",prop:"parentBankName"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入开户银行名称"},model:{value:e.ruleForm3.parentBankName,callback:function(t){e.$set(e.ruleForm3,"parentBankName",t)},expression:"ruleForm3.parentBankName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"企业对公账户：",prop:"accountNo"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入企业对公账户"},model:{value:e.ruleForm3.accountNo,callback:function(t){e.$set(e.ruleForm3,"accountNo",t)},expression:"ruleForm3.accountNo"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"支付行号：",prop:"unionBank"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入支付行号"},model:{value:e.ruleForm3.unionBank,callback:function(t){e.$set(e.ruleForm3,"unionBank",t)},expression:"ruleForm3.unionBank"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"开户行地区代码：",prop:"bankCityNo"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入开户行地区代码"},model:{value:e.ruleForm3.bankCityNo,callback:function(t){e.$set(e.ruleForm3,"bankCityNo",t)},expression:"ruleForm3.bankCityNo"}}),e._v(" "),r("el-tooltip",{attrs:{placement:"right",effect:"light"}},[r("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"content"},on:{click:e.linkBlank},slot:"content"},[e._v("点击查询开户行地区代码\n          ")]),e._v(" "),r("i",{staticClass:"el-icon-question",staticStyle:{position:"absolute",color:"#666",right:"-20px",top:"13px"}})])],1),e._v(" "),r("el-form-item",{attrs:{label:"开户行支行名称：",prop:"backName"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入开户行支行名称"},model:{value:e.ruleForm3.backName,callback:function(t){e.$set(e.ruleForm3,"backName",t)},expression:"ruleForm3.backName"}})],1)],1),e._v(" "),r("div",{staticClass:"public-bottom-btns"},[r("el-button",{staticStyle:{"margin-left":"210px"},attrs:{type:"primary"},on:{click:e.avtive1}},[e._v("下一步")])],1)],1),e._v(" "),e.failReason?r("el-alert",{attrs:{title:e.failReason,type:"error"}}):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"public-table-title"},[this._v("\n      企业信息\n      "),t("span",{staticClass:"public-c999 public-f13"},[this._v("按照营业执照上的内容逐字填写")])])}]};var u=r("r7/j")(n,o,!1,function(e){r("+clr")},null,null);t.default=u.exports},"i/rw":function(e,t,r){e.exports={default:r("s9uK"),__esModule:!0}},s9uK:function(e,t,r){var a=r("zJrI"),l=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return l.stringify.apply(l,arguments)}}});