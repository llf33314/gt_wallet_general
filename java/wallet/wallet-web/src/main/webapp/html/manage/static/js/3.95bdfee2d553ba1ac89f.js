webpackJsonp([3],{Ikxl:function(e,t){},fvck:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("D/u7"),l=r.n(a),s=r("i/rw"),i=r.n(s),o={data:function(){var e=this;return{ruleForm1:{companyName:"",businessLicense:"",companyAddress:"",area:"",province:""},rules1:{area:[{required:!0,message:"请选择市县区",trigger:"change"}],province:[{required:!0,message:"请选择省份",trigger:"change"}],companyName:[{required:!0,message:"请输入企业名称",trigger:"blur"},{min:3,max:30,message:"长度在 3 到 30 个字符",trigger:"blur"}],companyAddress:[{required:!0,message:"请输入企业地址",trigger:"blur"},{min:3,max:30,message:"长度在 3 到 30 个字符",trigger:"blur"}],businessLicense:[{required:!0,message:"请输入营业执照号",trigger:"blur"}]},provinceOptins:[],areaOptins:[],ruleForm2:{legalName:"",legalIds:"",legalPhone:""},rules2:{legalName:[{required:!0,message:"请输入法定代表人姓名",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],legalIds:[{required:!0,message:"请输入法人证件号码",trigger:"blur"}],legalPhone:[{required:!0,message:"请输入法人手机号码",trigger:"blur"}]},ruleForm3:{accountNo:"",unionBank:""},rules3:{accountNo:[{validator:function(t,r,a){""==r?a(new Error("请输入对公帐号")):$.ajax({url:e.DFPAYDOMAIN+"/getBankCardBin",type:"POST",dataType:"json",data:{bankCardNo:e.ruleForm3.accountNo},success:function(t){console.log(t,"****"),0!=t.code?a(new Error(t.msg)):1==t.data.cardState?(a(),e.isUnionBank(t.data.bankName)):a(new Error("无效帐号"))}})},trigger:"blur"}],unionBank:[{required:!0,message:"请输入支付行号",trigger:"blur"}]},activeFlag:{},isUnionBankFlag:!1}},mounted:function(){this.getProvince()},methods:{isUnionBank:function(e){var t=this;console.log(e,"name");["中国工商银行","中国农业银行","中国建设银行","中信银行","平安银行","招商银行","兴业银行","南京银行","农信银行"].forEach(function(r){t.isUnionBankFlag=e!=r})},getBankCardBin:function(){var e=this;$.ajax({url:this.DFPAYDOMAIN+"/getBankCardBin",type:"POST",dataType:"json",data:{bankCardNo:this.ruleForm3.accountNo},success:function(t){console.log(t,"****"),0!=t.code?e.$message.error(t.msg):1==t.data.cardState?e.isUnionBank(t.data.bankName):e.$message.error("无效帐号")}})},getProvince:function(){var e=this;$.ajax({url:this.DFPAYDOMAIN+"/wcommon/getProvince",type:"GET",dataType:"json",success:function(t){console.log(t,"6"),0==t.code?e.provinceOptins=t.data:e.$message.error(t.msg)}})},getareas:function(e){var t=this;$.ajax({url:this.DFPAYDOMAIN+"/wcommon/queryCityByParentId",type:"POST",dataType:"json",data:{parentId:e},success:function(e){console.log(e,"6"),0==e.code?(t.ruleForm1.area="",t.areaOptins=e.data):t.$message.error(e.msg)}})},submitForm:function(e,t){var r=this;this.$refs[e].validate(function(e){r.activeFlag[t]=!!e})},avtive1:function(){var e=this;if(this.submitForm("ruleForm1","type1"),this.submitForm("ruleForm2","type2"),this.submitForm("ruleForm3","type3"),this.activeFlag.type1&&this.activeFlag.type2&&this.activeFlag.type3){var t=JSON.parse(i()(this.ruleForm1));this.provinceOptins.forEach(function(r){e.ruleForm1.province==r.id&&(t.province=r.city_code)}),this.areaOptins.forEach(function(r){e.ruleForm1.area==r.id&&(t.area=r.city_code)});var r=l()(t,this.ruleForm2,this.ruleForm3);r.memberId=this.$route.params.memberId,this.submit(r)}},submit:function(e){var t=this;this.$confirm("提交后不可更改信息，确认提交么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){$.ajax({url:t.DFPAYDOMAIN+"/walletCompany/save",type:"POST",dataType:"json",data:e,success:function(e){console.log(e,"res"),0!==e.code?t.$router.push({path:"/wallet/company/open/uploadFile/"+t.$route.params.memberId}):t.$message.error(e.msg)}})}).catch(function(){t.$message({type:"info",message:"已取消"})})}}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("section",{staticClass:"wallet-company-open"},[r("el-breadcrumb",{staticClass:"public-crumbs",attrs:{separator:"/"}},[r("el-breadcrumb-item",[e._v("多粉钱包")]),e._v(" "),r("el-breadcrumb-item",[e._v("企业开通")])],1),e._v(" "),r("div",{staticClass:"public-content",staticStyle:{"margin-bottom":"0","padding-bottom":"0"}},[r("el-steps",{staticStyle:{"border-bottom":"1px solid #ddd",padding:"20px 0"},attrs:{active:1,center:"true"}},[r("el-step",{attrs:{title:"填写基本信息"}}),e._v(" "),r("el-step",{attrs:{title:"上传证件照片"}}),e._v(" "),r("el-step",{attrs:{title:"提交成功"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"public-content",staticStyle:{"margin-top":"40px"}},[e._m(0),e._v(" "),r("el-form",{ref:"ruleForm1",staticStyle:{width:"600px"},attrs:{model:e.ruleForm1,rules:e.rules1,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"企业名称：",prop:"companyName"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入企业名称"},model:{value:e.ruleForm1.companyName,callback:function(t){e.$set(e.ruleForm1,"companyName",t)},expression:"ruleForm1.companyName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"营业执照号：",prop:"businessLicense"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入营业执照号"},model:{value:e.ruleForm1.businessLicense,callback:function(t){e.$set(e.ruleForm1,"businessLicense",t)},expression:"ruleForm1.businessLicense"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"企业地址："}},[r("el-form-item",{staticStyle:{display:"inline-block",width:"218px"},attrs:{prop:"province"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getareas},model:{value:e.ruleForm1.province,callback:function(t){e.$set(e.ruleForm1,"province",t)},expression:"ruleForm1.province"}},e._l(e.provinceOptins,function(e){return r("el-option",{key:e.id,attrs:{label:e.city_name,value:e.id+""}})}))],1),e._v(" "),r("el-form-item",{staticStyle:{display:"inline-block",width:"218px"},attrs:{prop:"area"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm1.area,callback:function(t){e.$set(e.ruleForm1,"area",t)},expression:"ruleForm1.area"}},e._l(e.areaOptins,function(e){return r("el-option",{key:e.id,attrs:{label:e.city_name,value:e.id+""}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{prop:"companyAddress"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入详细地址"},model:{value:e.ruleForm1.companyAddress,callback:function(t){e.$set(e.ruleForm1,"companyAddress",t)},expression:"ruleForm1.companyAddress"}})],1)],1),e._v(" "),r("div",{staticClass:"public-table-title"},[e._v("\n      法定代表人信息\n    ")]),e._v(" "),r("el-form",{ref:"ruleForm2",staticStyle:{width:"600px"},attrs:{model:e.ruleForm2,rules:e.rules2,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"法定代表人姓名：",prop:"legalName"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入法定代表人姓名"},model:{value:e.ruleForm2.legalName,callback:function(t){e.$set(e.ruleForm2,"legalName",t)},expression:"ruleForm2.legalName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"法人证件号码：",prop:"legalIds"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入法人证件号码"},model:{value:e.ruleForm2.legalIds,callback:function(t){e.$set(e.ruleForm2,"legalIds",t)},expression:"ruleForm2.legalIds"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"法人手机号码：",prop:"legalPhone"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入法人手机号码"},model:{value:e.ruleForm2.legalPhone,callback:function(t){e.$set(e.ruleForm2,"legalPhone",t)},expression:"ruleForm2.legalPhone"}})],1)],1),e._v(" "),r("div",{staticClass:"public-table-title"},[e._v("\n      银行卡信息\n    ")]),e._v(" "),r("el-form",{ref:"ruleForm3",staticStyle:{width:"600px"},attrs:{model:e.ruleForm3,rules:e.rules3,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"企业对公账户：",prop:"accountNo"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入企业对公账户"},model:{value:e.ruleForm3.accountNo,callback:function(t){e.$set(e.ruleForm3,"accountNo",t)},expression:"ruleForm3.accountNo"}})],1),e._v(" "),e.isUnionBankFlag?r("el-form-item",{attrs:{label:"支付行号：",prop:"unionBank"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入支付行号"},model:{value:e.ruleForm3.unionBank,callback:function(t){e.$set(e.ruleForm3,"unionBank",t)},expression:"ruleForm3.unionBank"}}),e._v(" "),r("el-tooltip",{attrs:{placement:"right",effect:"light"}},[r("div",{attrs:{slot:"content"},slot:"content"},[e._v("如非以下银行，则需要填写支付行号。\n            "),r("br"),e._v(" （工商银行、农业银行、中国银行、建设银行、\n            "),r("br"),e._v(" 中信银行、广大银行、华夏银行、平安银行、\n            "),r("br"),e._v(" 招商银行、兴业银行、浦发银行、邮储银行、\n            "),r("br"),e._v(" 宁波银行、南京银行、农信湖南）\n          ")]),e._v(" "),r("i",{staticClass:"el-icon-question",staticStyle:{position:"absolute",color:"#666",right:"-20px",top:"13px"}})])],1):e._e()],1)],1),e._v(" "),r("div",{staticClass:"public-bottom-btns"},[r("el-button",{staticStyle:{"margin-left":"210px"},attrs:{type:"primary"},on:{click:e.avtive1}},[e._v("下一步")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"public-table-title"},[this._v("\n      企业信息\n      "),t("span",{staticClass:"public-c999 public-f13"},[this._v("按照营业执照上的内容逐字填写")])])}]},c=r("DoIX")(o,n,!1,function(e){r("Ikxl")},null,null);t.default=c.exports},"i/rw":function(e,t,r){e.exports={default:r("s9uK"),__esModule:!0}},s9uK:function(e,t,r){var a=r("zJrI"),l=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return l.stringify.apply(l,arguments)}}});